{% extends "base.html" %}
{% load static %}
{% block title %}GAON Mercadito — Moda & Estilo{% endblock %}

{% block content %}

<!-- HERO con carrusel (pastel) -->
<section class="section" style="margin-top:8px">
  <div class="hero" id="hero-carousel" aria-label="Destacados" style="position:relative">
  <div class="slides" style="position:relative; overflow:hidden; border-radius:18px; box-shadow:var(--shadow); width:100%">
      <div class="slide is-active" style="position:relative; display:block; width:100%">
        <img src="{% static 'gaon.ico' %}" alt="GAON" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(560px,92%);
          box-shadow:var(--shadow-sm)">
          <h1 style="margin:0 0 6px">Bienvenido a <strong>GAON Mercadito</strong></h1>
          <p class="text-muted" style="margin:0">Iniciá sesión para comprar o vender productos</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            {% if request.user.is_authenticated %}
              <a class="btn" href="/products/">Ver productos</a>
              <a class="btn outline" href="/account/">Mi cuenta</a>
            {% else %}
              <a class="btn" href="/login/">Iniciar sesión</a>
              <a class="btn outline" href="/signup/">Crear cuenta</a>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="slide" style="position:relative; display:none; width:100%">
  <img src="{% static 'home/foro.jpg' %}" alt="Foro GAON" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(520px,92%);
          box-shadow:var(--shadow-sm)">
          <h2 style="margin:0 0 6px">Foro GAON</h2>
          <p class="text-muted" style="margin:0">Compartí opiniones, preguntá por talles y descubrí experiencias de otros compradores.</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            {% if request.user.is_authenticated %}
              <a class="btn" href="/foro/">Ver foro</a>
            {% else %}
              <a class="btn" href="/login/">Iniciar sesión</a>
              <a class="btn outline" href="/signup/">Crear cuenta</a>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="slide" style="position:relative; display:none; width:100%">
  <img src="{% static 'home/compare.jpg' %}" alt="Comparar precios" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(520px,92%);
          box-shadow:var(--shadow-sm)">
          <h2 style="margin:0 0 6px">Compará precios</h2>
          <p class="text-muted" style="margin:0">Encontrá la mejor oferta comparando productos entre vendedores.</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            {% if request.user.is_authenticated %}
              <a class="btn outline" href="{% url 'compare-prices' %}">Comparar precios</a>
            {% else %}
              <a class="btn" href="/login/">Iniciar sesión</a>
              <a class="btn outline" href="/signup/">Crear cuenta</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <button class="ctrl prev" aria-label="Anterior" style="
      position:absolute; top:50%; transform:translateY(-50%); left:12px;
      background:#fff; border:1px solid var(--border); width:38px; height:38px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow-sm)">‹</button>
    <button class="ctrl next" aria-label="Siguiente" style="
      position:absolute; top:50%; transform:translateY(-50%); right:12px;
      background:#fff; border:1px solid var(--border); width:38px; height:38px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow-sm)">›</button>

    <div class="dots" aria-label="Paginación" style="display:flex; gap:6px; justify-content:center; margin-top:10px"></div>
  </div>
</section>

<!-- BENEFICIOS -->
<section class="section" style="padding-top:14px">
  <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(240px,1fr));">
    <article class="card pad">
      <h3 style="margin:0 0 6px">Cambios fáciles</h3>
      <p class="text-muted" style="margin:0">Tenés 10 días para cambiar tu compra. Sin vueltas.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Envíos a todo el país</h3>
      <p class="text-muted" style="margin:0">Recibí tu pedido donde estés, rápido y seguro.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Pagá como quieras</h3>
      <p class="text-muted" style="margin:0">Tarjetas, débito, efectivo y Mercado Pago.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Atención cercana</h3>
      <p class="text-muted" style="margin:0">Estamos para ayudarte por WhatsApp e Instagram.</p>
    </article>
  </div>
</section>

{# Colecciones destacadas removidas por petición del usuario #}

<!-- CTA FINAL -->
<section class="card pad" style="margin:24px 0; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
  <div>
    <h3 style="margin:0 0 6px">¿Primera vez en GAON?</h3>
    {% if request.user.is_authenticated %}
      <p class="text-muted" style="margin:0">Empezá a ver nuestros productos.</p>
    {% else %}
      <p class="text-muted" style="margin:0">Creá tu cuenta y obtené novedades y beneficios.</p>
    {% endif %}
  </div>
  <div class="row" style="gap:8px; flex-wrap:wrap">
    {% if request.user.is_authenticated %}
      <a class="btn outline" href="/account/">Mi cuenta</a>
      <a class="btn" href="/products/">Ver catálogo</a>
    {% else %}
      <a class="btn" href="/login/">Iniciar sesión</a>
      <a class="btn outline" href="/signup/">Registrarse</a>
    {% endif %}
  </div>
</section>

<!-- JS carrusel -->
<script>
(function(){
  const root = document.getElementById('hero-carousel'); if(!root) return;
  const slides = Array.from(root.querySelectorAll('.slide'));
  const btnPrev = root.querySelector('.prev'); const btnNext = root.querySelector('.next');
  const dotsWrap = root.querySelector('.dots');

  let idx = 0;
  function render(){
    slides.forEach((s,i)=>s.style.display = i===idx ? 'block':'none');
    dotsWrap.querySelectorAll('button').forEach((d,i)=>d.classList.toggle('is-active', i===idx));
  }
  function go(n){ idx = (n + slides.length) % slides.length; render(); }

  slides.forEach((_s,i)=>{ const b=document.createElement('button'); b.setAttribute('aria-label','Ir al slide '+(i+1));
    b.style.cssText='width:8px;height:8px;border-radius:999px;border:0;background:#cbd5e1;cursor:pointer';
    b.addEventListener('click',()=>go(i)); dotsWrap.appendChild(b); });
  if(btnPrev) btnPrev.addEventListener('click',()=>go(idx-1));
  if(btnNext) btnNext.addEventListener('click',()=>go(idx+1));

  let t=setInterval(()=>go(idx+1), 5000);
  root.addEventListener('mouseenter', ()=>clearInterval(t));
  root.addEventListener('mouseleave', ()=>t=setInterval(()=>go(idx+1), 5000));
  render();
})();
</script>

{% endblock %}
