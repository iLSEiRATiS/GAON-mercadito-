{% extends "base.html" %}
{% load static %}
{% block title %}GAON Mercadito — Moda & Estilo{% endblock %}

{% block content %}

<!-- HERO con carrusel (pastel) -->
<section class="section" style="margin-top:8px">
  <div class="hero" id="hero-carousel" aria-label="Destacados" style="position:relative">
    <div class="slides" style="position:relative; overflow:hidden; border-radius:18px; box-shadow:var(--shadow)">
      <div class="slide is-active" style="position:relative; display:block">
        <img src="{% static 'home/hero1.jpg' %}" alt="Nueva temporada urbana" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(560px,92%);
          box-shadow:var(--shadow-sm)">
          <h1 style="margin:0 0 6px">Bienvenido a <strong>GAON Mercadito</strong></h1>
          <p class="text-muted" style="margin:0">Iniciá sesión para comprar o vender productos</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            {% if request.user.is_authenticated %}
              <a class="btn" href="/products/">Ir a la tienda</a>
              <a class="btn outline" href="/account/">Mi cuenta</a>
            {% else %}
              <a class="btn" href="/login/">Iniciar sesión</a>
              <a class="btn outline" href="/signup/">Crear cuenta</a>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="slide" style="position:relative; display:none">
        <img src="{% static 'home/hero2.jpg' %}" alt="Básicos premium para todos los días" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(520px,92%);
          box-shadow:var(--shadow-sm)">
          <h2 style="margin:0 0 6px">Básicos Premium</h2>
          <p class="text-muted" style="margin:0">Calidad que se nota, precios que sorprenden</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            <a class="btn outline" href="/products/?order=price_asc">Descubrir</a>
          </div>
        </div>
      </div>

      <div class="slide" style="position:relative; display:none">
        <img src="{% static 'home/hero3.jpg' %}" alt="Ofertas y combos" style="width:100%; height:420px; object-fit:cover; background:#f2f6fb; display:block">
        <div class="caption" style="
          position:absolute; inset:auto 16px 16px 16px; background:rgba(255,255,255,.88);
          border:1px solid var(--border); border-radius:16px; padding:14px; max-width:min(520px,92%);
          box-shadow:var(--shadow-sm)">
          <h2 style="margin:0 0 6px">Ofertas & Combos</h2>
          <p class="text-muted" style="margin:0">Armá tu look y ahorrá con packs</p>
          <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px">
            <a class="btn" href="/products/?q=promo">Aprovechar</a>
          </div>
        </div>
      </div>
    </div>

    <button class="ctrl prev" aria-label="Anterior" style="
      position:absolute; top:50%; transform:translateY(-50%); left:12px;
      background:#fff; border:1px solid var(--border); width:38px; height:38px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow-sm)">‹</button>
    <button class="ctrl next" aria-label="Siguiente" style="
      position:absolute; top:50%; transform:translateY(-50%); right:12px;
      background:#fff; border:1px solid var(--border); width:38px; height:38px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow-sm)">›</button>

    <div class="dots" aria-label="Paginación" style="display:flex; gap:6px; justify-content:center; margin-top:10px"></div>
  </div>
</section>

<!-- BENEFICIOS -->
<section class="section" style="padding-top:14px">
  <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(240px,1fr));">
    <article class="card pad">
      <h3 style="margin:0 0 6px">Cambios fáciles</h3>
      <p class="text-muted" style="margin:0">Tenés 10 días para cambiar tu compra. Sin vueltas.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Envíos a todo el país</h3>
      <p class="text-muted" style="margin:0">Recibí tu pedido donde estés, rápido y seguro.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Pagá como quieras</h3>
      <p class="text-muted" style="margin:0">Tarjetas, débito, efectivo y Mercado Pago.</p>
    </article>
    <article class="card pad">
      <h3 style="margin:0 0 6px">Atención cercana</h3>
      <p class="text-muted" style="margin:0">Estamos para ayudarte por WhatsApp e Instagram.</p>
    </article>
  </div>
</section>

<!-- COLECCIONES DESTACADAS -->
<section class="section" style="padding-top:0">
  <h2 style="margin:0 0 12px">Colecciones destacadas</h2>
  <div class="grid">
    <a href="/products/?q=urban" class="card" aria-label="Ver colección Urbana">
      <div class="imgbox" style="height:200px"><img src="{% static 'home/col1.jpg' %}" alt="Colección Urbana"></div>
      <div class="pad">
        <h3 style="margin:0 0 6px">Urbana</h3>
        <p class="text-muted" style="margin:0">Remeras, buzos y joggers</p>
      </div>
    </a>
    <a href="/products/?q=basic" class="card" aria-label="Ver colección Básicos">
      <div class="imgbox" style="height:200px"><img src="{% static 'home/col2.jpg' %}" alt="Básicos"></div>
      <div class="pad">
        <h3 style="margin:0 0 6px">Básicos</h3>
        <p class="text-muted" style="margin:0">Cortes limpios, colores neutros</p>
      </div>
    </a>
    <a href="/products/?q=denim" class="card" aria-label="Ver colección Denim">
      <div class="imgbox" style="height:200px"><img src="{% static 'home/col3.jpg' %}" alt="Denim"></div>
      <div class="pad">
        <h3 style="margin:0 0 6px">Denim</h3>
        <p class="text-muted" style="margin:0">Jeans y camperas para durar</p>
      </div>
    </a>
    <a href="/products/?q=promo" class="card" aria-label="Ver Ofertas">
      <div class="imgbox" style="height:200px"><img src="{% static 'home/col4.jpg' %}" alt="Ofertas"></div>
      <div class="pad">
        <h3 style="margin:0 0 6px">Ofertas</h3>
        <p class="text-muted" style="margin:0">Precios especiales por tiempo limitado</p>
      </div>
    </a>
  </div>
</section>

<!-- CTA FINAL -->
<section class="card pad" style="margin:24px 0; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
  <div>
    <h3 style="margin:0 0 6px">¿Primera vez en GAON?</h3>
    <p class="text-muted" style="margin:0">Creá tu cuenta y obtené novedades y beneficios.</p>
  </div>
  <div class="row" style="gap:8px; flex-wrap:wrap">
    {% if request.user.is_authenticated %}
      <a class="btn outline" href="/account/">Mi cuenta</a>
      <a class="btn" href="/products/">Ver catálogo</a>
    {% else %}
      <a class="btn outline" href="/signup/">Registrarse</a>
      <a class="btn" href="/products/">Ver catálogo</a>
    {% endif %}
  </div>
</section>

<!-- JS carrusel -->
<script>
(function(){
  const root = document.getElementById('hero-carousel'); if(!root) return;
  const slides = Array.from(root.querySelectorAll('.slide'));
  const btnPrev = root.querySelector('.prev'); const btnNext = root.querySelector('.next');
  const dotsWrap = root.querySelector('.dots');

  let idx = 0;
  function render(){
    slides.forEach((s,i)=>s.style.display = i===idx ? 'block':'none');
    dotsWrap.querySelectorAll('button').forEach((d,i)=>d.classList.toggle('is-active', i===idx));
  }
  function go(n){ idx = (n + slides.length) % slides.length; render(); }

  slides.forEach((_s,i)=>{ const b=document.createElement('button'); b.setAttribute('aria-label','Ir al slide '+(i+1));
    b.style.cssText='width:8px;height:8px;border-radius:999px;border:0;background:#cbd5e1;cursor:pointer';
    b.addEventListener('click',()=>go(i)); dotsWrap.appendChild(b); });
  if(btnPrev) btnPrev.addEventListener('click',()=>go(idx-1));
  if(btnNext) btnNext.addEventListener('click',()=>go(idx+1));

  let t=setInterval(()=>go(idx+1), 5000);
  root.addEventListener('mouseenter', ()=>clearInterval(t));
  root.addEventListener('mouseleave', ()=>t=setInterval(()=>go(idx+1), 5000));
  render();
})();
</script>

{% endblock %}
